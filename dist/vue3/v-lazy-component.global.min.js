!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).LazyComponent=t(e.Vue)}(this,(function(e){"use strict";var t=e.defineComponent({name:"LazyComponent",props:{wrapperTag:{type:String,required:!1,default:"div"},isIntersected:{type:Boolean,required:!1,default:!1},idle:{type:Boolean,required:!1,default:!1},rootMargin:{type:String,required:!1,default:"0px 0px 0px 0px"},threshold:{type:[Number,Array],required:!1,default:0}},setup(t,r){let{emit:n}=r;const o=e.ref(null),s=e.reactive({wrapperTag:t.wrapperTag,isIntersected:t.isIntersected,idle:t.idle,rootMargin:t.rootMargin,threshold:t.threshold,observer:null});e.watch((()=>t.isIntersected),(e=>{e&&(s.isIntersected=!0)})),e.watch((()=>s.isIntersected),(e=>{e&&n("intersected",o.value)}));const i=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype,d=e=>{s.isIntersected=e.some((e=>e.intersectionRatio>0)),s.isIntersected&&a()},a=()=>{i()&&s.observer.unobserve(o.value)};return e.onMounted((()=>{i()?s.isIntersected||s.idle||(()=>{const{rootMargin:e,threshold:t}=s,r={root:void 0,rootMargin:e,threshold:t};s.observer=new IntersectionObserver(d,r),s.observer.observe(o.value)})():s.isIntersected=!0,s.isIntersected&&n("intersected",o.value)})),e.onBeforeUnmount((()=>{s.isIntersected||s.idle||a()})),{rootRef:o,state:s}}});return t.render=function(t,r,n,o,s,i){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.state.wrapperTag),{ref:"rootRef",class:e.normalizeClass(["v-lazy-component",{"v-lazy-component--loading":!t.state.isIntersected,"v-lazy-component--loaded":t.state.isIntersected}]),style:{minWidth:"1px",minHeight:"1px"}},{default:e.withCtx((()=>[t.state.isIntersected?e.renderSlot(t.$slots,"default",{key:0}):e.createCommentVNode("",!0),t.state.isIntersected?e.createCommentVNode("",!0):e.renderSlot(t.$slots,"placeholder",{key:1})])),_:3},8,["class"])},(()=>{const e=t;return e.install=t=>{t.component("LazyComponent",e)},e})()}));
