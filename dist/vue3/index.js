!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).LazyComponent={},e.Vue)}(this,(function(e,t){"use strict";var r=t.defineComponent({name:"LazyComponent",props:{wrapperTag:{type:String,required:!1,default:"div"},isIntersected:{type:Boolean,required:!1,default:!1},idle:{type:Boolean,required:!1,default:!1},rootMargin:{type:String,required:!1,default:"0px 0px 0px 0px"},threshold:{type:[Number,Array],required:!1,default:0}},setup(e,r){let{emit:n}=r;const o=t.ref(null),s=t.reactive({wrapperTag:e.wrapperTag,isIntersected:e.isIntersected,idle:e.idle,rootMargin:e.rootMargin,threshold:e.threshold,observer:null});t.watch((()=>e.isIntersected),(e=>{e&&(s.isIntersected=!0)})),t.watch((()=>s.isIntersected),(e=>{e&&n("intersected",o.value)}));const i=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype,d=e=>{s.isIntersected=e.some((e=>e.intersectionRatio>0)),s.isIntersected&&a()},a=()=>{i()&&s.observer.unobserve(o.value)};return t.onMounted((()=>{i()?s.isIntersected||s.idle||(()=>{const{rootMargin:e,threshold:t}=s,r={root:void 0,rootMargin:e,threshold:t};s.observer=new IntersectionObserver(d,r),s.observer.observe(o.value)})():s.isIntersected=!0,s.isIntersected&&n("intersected",o.value)})),t.onBeforeUnmount((()=>{s.isIntersected||s.idle||a()})),{rootRef:o,state:s}}});r.render=function(e,r,n,o,s,i){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.state.wrapperTag),{ref:"rootRef",class:t.normalizeClass(["v-lazy-component",{"v-lazy-component--loading":!e.state.isIntersected,"v-lazy-component--loaded":e.state.isIntersected}]),style:{minWidth:"1px",minHeight:"1px"}},{default:t.withCtx((()=>[e.state.isIntersected?t.renderSlot(e.$slots,"default",{key:0}):t.createCommentVNode("",!0),e.state.isIntersected?t.createCommentVNode("",!0):t.renderSlot(e.$slots,"placeholder",{key:1})])),_:3},8,["class"])};var n=(()=>{const e=r;return e.install=t=>{t.component("LazyComponent",e)},e})();e.default=n,Object.defineProperty(e,"__esModule",{value:!0})}));
